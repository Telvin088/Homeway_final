{% extends "shop/base.html" %}
{% block title %}Home{% endblock %}
{% block content %}
<!-- <div class="bg-white rounded shadow p-8 mt-8 text-center">
    <h2 class="text-3xl font-extrabold mb-4 text-gray-800">Welcome, {{ username }}!</h2>
    <p class="text-lg text-gray-600 mb-2">Your user ID is: <span class="font-mono">{{ user_id }}</span></p>
    <p class="text-gray-500">Enjoy shopping with us!</p>
</div> -->

<!-- Main Content -->
<div class="flex border" style="width: 1300px; margin-left: -22px;">
    <!-- Sidebar Categories -->
    <div class="border-r relative" style="width: 180px;">

        {% if categories %}
        {% for category in categories %}
        <div class="py-3 border-b flex items-center justify-between hover:bg-gray-50 cursor-pointer category-item relative" data-category-id="{{ category.id }}">
            <!-- <span style="font-size: 17px; font-variation-settings: 'wght' 400;" class="material-symbols-outlined">
                nutrition
            </span> -->
            <span style="font-size: 10px; color: #030712;" class="font-normal">
                {{ category.name }}
            </span>
            {% if category.subcategories.all %}
            <span class="material-symbols-outlined mr-2" style="font-size: 15px; font-variation-settings: 'wght' 400;">
                chevron_right
            </span>
            {% endif %}
            
            <!-- Subcategories Popup -->
            {% if category.subcategories.all %}
            <div class="subcategories-popup absolute left-full top-0 bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-48 opacity-0 invisible transition-all duration-200 ease-in-out transform translate-x-2">
                <div class="p-3">
                    <h4 class="font-semibold text-sm text-gray-800 mb-2 border-b pb-1">{{ category.name }}</h4>
                    {% for subcategory in category.subcategories.all %}
                    <div class="py-1 px-2 hover:bg-gray-50 rounded cursor-pointer text-xs text-gray-700 hover:text-grogin-purple transition-colors">
                        {{ subcategory.name }}
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>

        {% endfor %}
        {% else %}
        <p class="text-sm text-gray-500">No categories available.</p>
        {% endif %}

    </div>

    <!-- Main Banner Slider -->
    <div class="flex-1 p-4">
        <div class="starter-template bg-gray-100 rounded-lg overflow-hidden relative" style="height: 363px;">
            <!-- Slides Container -->
            <div class="slides-container relative w-full h-full">
                <!-- Slide 1 -->
                <div class="slide active absolute inset-0 p-5 transition-opacity duration-500">
                    <div class="absolute top-4 left-4 px-8 py-2">
                        <span class="bg-green-500 text-white text-xs px-2 py-2 rounded font-bold" style="font-size: 9px; color: #166534;">Weekend Discount</span>
                    </div>
                    <div class="flex h-full">
                        <div class="p-8 w-1/2">
                            <h2 class="text-3xl font-bold text-purple-900 mb-2 mt-4" style="font-size: 31px; color: #39245f; line-height: 1.2;">Get the best quality products<br>at the lowest prices</h2>
                            <p class="text-gray-700 mb-6 mt-2" style="color: #030712; font-size: 12px; line-height: -0.3;">We have prepared special discounts for you on grocery products. Don't miss these opportunities...</p>
                            <div class="flex items-center gap-4">
                                <button class="hover:bg-grogin-dark-purple font-bold text-white px-4 py-2 rounded flex items-center" style="background-color: #634c9f; font-size: 14px;">
                                    Shop Now
                                    <i class="fas fa-arrow-right ml-2"></i>
                                </button>
                            </div>
                        </div>
                        <div class="w-1/2">
                            <img src="https://www.saffronroad.com/cdn/shop/files/Category-SimmerSauce_900x_0ab540c7-dabc-4748-b1e2-a8dcccd56eaa_3024x.png?v=1626078573" alt="Grocery Products" class="h-full w-full object-cover">
                        </div>
                    </div>
                </div>

                <!-- Slide 2 -->
                <div class="slide absolute inset-0 p-5 transition-opacity duration-500 opacity-0">
                    <div class="absolute top-4 left-4 px-8 py-2">
                        <span class="bg-red-500 text-white text-xs px-2 py-2 rounded font-bold" style="font-size: 9px; color: #ffffff;">Flash Sale</span>
                    </div>
                    <div class="flex h-full">
                        <div class="p-8 w-1/2">
                            <h2 class="text-3xl font-bold text-purple-900 mb-2 mt-4" style="font-size: 31px; color: #39245f; line-height: 1.2;">Fresh Organic Vegetables<br>Direct from Farm</h2>
                            <p class="text-gray-700 mb-6 mt-2" style="color: #030712; font-size: 12px; line-height: -0.3;">100% organic and fresh vegetables delivered to your doorstep. Healthy eating made easy...</p>
                            <div class="flex items-center gap-4">
                                <button class="hover:bg-grogin-dark-purple font-bold text-white px-4 py-2 rounded flex items-center" style="background-color: #634c9f; font-size: 14px;">
                                    Shop Fresh
                                    <i class="fas fa-leaf ml-2"></i>
                                </button>
                            </div>
                        </div>
                        <div class="w-1/2">
                            <img src="https://static.vecteezy.com/system/resources/previews/047/825/157/non_2x/fresh-vegetables-with-water-splash-isolated-on-a-transparent-background-free-png.png?w=500&h=300&fit=crop" alt="Fresh Vegetables" class="h-full w-full object-cover">
                        </div>
                    </div>
                </div>

                <!-- Slide 3 -->
                <div class="slide absolute inset-0 p-5 transition-opacity duration-500 opacity-0">
                    <div class="absolute top-4 left-4 px-8 py-2">
                        <span class="bg-blue-500 text-white text-xs px-2 py-2 rounded font-bold" style="font-size: 9px; color: #ffffff;">New Arrival</span>
                    </div>
                    <div class="flex h-full">
                        <div class="p-8 w-1/2">
                            <h2 class="text-3xl font-bold text-purple-900 mb-2 mt-4" style="font-size: 31px; color: #39245f; line-height: 1.2;">Premium Dairy Products<br>Farm Fresh Quality</h2>
                            <p class="text-gray-700 mb-6 mt-2" style="color: #030712; font-size: 12px; line-height: -0.3;">Pure and natural dairy products from trusted farms. Rich in nutrients and taste...</p>
                            <div class="flex items-center gap-4">
                                <button class="hover:bg-grogin-dark-purple font-bold text-white px-4 py-2 rounded flex items-center" style="background-color: #634c9f; font-size: 14px;">
                                    Explore Dairy
                                    <i class="fas fa-cheese ml-2"></i>
                                </button>
                            </div>
                        </div>
                        <div class="w-1/2">
                            <img src="https://images.squarespace-cdn.com/content/v1/5c99011c77b9037f574a56be/1563916070299-U60FA53UQANIV4ER2PFP/Pint%2BStacks_Updated.png?w=500&h=300&fit=crop" alt="Dairy Products" class="h-full w-full object-cover">
                        </div>
                    </div>
                </div>

                <!-- Slide 4 -->
                <div class="slide absolute inset-0 p-5 transition-opacity duration-500 opacity-0">
                    <div class="absolute top-4 left-4 px-8 py-2">
                        <span class="bg-yellow-500 text-white text-xs px-2 py-2 rounded font-bold" style="font-size: 9px; color: #ffffff;">Limited Time</span>
                    </div>
                    <div class="flex h-full">
                        <div class="p-8 w-1/2">
                            <h2 class="text-3xl font-bold text-purple-900 mb-2 mt-4" style="font-size: 31px; color: #39245f; line-height: 1.2;">Artisan Bakery Items<br>Freshly Baked Daily</h2>
                            <p class="text-gray-700 mb-6 mt-2" style="color: #030712; font-size: 12px; line-height: -0.3;">Handcrafted breads, pastries, and baked goods made with love and traditional recipes...</p>
                            <div class="flex items-center gap-4">
                                <button class="hover:bg-grogin-dark-purple font-bold text-white px-4 py-2 rounded flex items-center" style="background-color: #634c9f; font-size: 14px;">
                                    Fresh Bakery
                                    <i class="fas fa-bread-slice ml-2"></i>
                                </button>
                            </div>
                        </div>
                        <div class="w-1/2">
                            <img src="https://novaera.ca/wp-content/uploads/MultigrnBreadGrpCMYK_011.png?w=500&h=300&fit=crop" alt="Bakery Items" class="h-full w-full object-cover">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Dots -->
            <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2">
                <button class="dot w-3 h-3 bg-grogin-purple rounded-full transition-all duration-300" data-slide="0"></button>
                <button class="dot w-3 h-3 bg-gray-300 rounded-full transition-all duration-300 hover:bg-gray-400" data-slide="1"></button>
                <button class="dot w-3 h-3 bg-gray-300 rounded-full transition-all duration-300 hover:bg-gray-400" data-slide="2"></button>
                <button class="dot w-3 h-3 bg-gray-300 rounded-full transition-all duration-300 hover:bg-gray-400" data-slide="3"></button>
            </div>

            
        </div>
    </div>
</div>

<style>
    .category-item:hover .subcategories-popup {
        opacity: 1;
        visibility: visible;
        transform: translateX(0);
    }
    
    .subcategories-popup {
        max-height: 300px;
        overflow-y: auto;
    }
    
    .subcategories-popup::-webkit-scrollbar {
        width: 4px;
    }
    
    .subcategories-popup::-webkit-scrollbar-thumb {
        background-color: #d1d5db;
        border-radius: 2px;
    }
</style>

<script>
    // Countdown Timer
    function updateCountdown() {
        const hours = document.getElementById('hours');
        const days = document.getElementById('days');
        const minutes = document.getElementById('minutes');
        const seconds = document.getElementById('seconds');

        let secondsValue = parseInt(seconds.textContent);
        let minutesValue = parseInt(minutes.textContent);
        let hoursValue = parseInt(hours.textContent);
        let daysValue = parseInt(days.textContent);

        secondsValue--;

        if (secondsValue < 0) {
            secondsValue = 59;
            minutesValue--;

            if (minutesValue < 0) {
                minutesValue = 59;
                hoursValue--;

                if (hoursValue < 0) {
                    hoursValue = 23;
                    daysValue--;

                    if (daysValue < 0) {
                        // Sale ended
                        daysValue = 0;
                        hoursValue = 0;
                        minutesValue = 0;
                        secondsValue = 0;
                    }
                }
            }
        }

        seconds.textContent = secondsValue < 10 ? '0' + secondsValue : secondsValue;
        minutes.textContent = minutesValue < 10 ? '0' + minutesValue : minutesValue;
        hours.textContent = hoursValue < 10 ? '0' + hoursValue : hoursValue;
        days.textContent = daysValue;
    }

    // Update countdown every second
    setInterval(updateCountdown, 1000);

    // Slider functionality
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide');
    const dots = document.querySelectorAll('.dot');
    const totalSlides = slides.length;

    function showSlide(index) {
        // Hide all slides
        slides.forEach(slide => {
            slide.classList.remove('active');
            slide.style.opacity = '0';
        });

        // Update dots
        dots.forEach(dot => {
            dot.classList.remove('bg-grogin-purple');
            dot.classList.add('bg-gray-300');
        });

        // Show current slide
        slides[index].classList.add('active');
        slides[index].style.opacity = '1';
        dots[index].classList.remove('bg-gray-300');
        dots[index].classList.add('bg-grogin-purple');
    }

    function nextSlide() {
        currentSlide = (currentSlide + 1) % totalSlides;
        showSlide(currentSlide);
    }

    function prevSlide() {
        currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
        showSlide(currentSlide);
    }

    // Auto-slide every 5 seconds
    setInterval(nextSlide, 5000);

    

    // Dot navigation
    dots.forEach((dot, index) => {
        dot.addEventListener('click', () => {
            currentSlide = index;
            showSlide(currentSlide);
        });
    });

    // Category hover effect
    document.addEventListener('DOMContentLoaded', function() {
        const categoryItems = document.querySelectorAll('.category-item');
        
        categoryItems.forEach(item => {
            const popup = item.querySelector('.subcategories-popup');
            
            if (popup) {
                item.addEventListener('mouseenter', function() {
                    // Hide all other popups first
                    document.querySelectorAll('.subcategories-popup').forEach(p => {
                        if (p !== popup) {
                            p.style.opacity = '0';
                            p.style.visibility = 'hidden';
                            p.style.transform = 'translateX(8px)';
                        }
                    });
                    
                    // Show current popup
                    popup.style.opacity = '1';
                    popup.style.visibility = 'visible';
                    popup.style.transform = 'translateX(0)';
                });
                
                item.addEventListener('mouseleave', function() {
                    setTimeout(() => {
                        if (!popup.matches(':hover') && !item.matches(':hover')) {
                            popup.style.opacity = '0';
                            popup.style.visibility = 'hidden';
                            popup.style.transform = 'translateX(8px)';
                        }
                    }, 100);
                });
                
                // Keep popup visible when hovering over it
                popup.addEventListener('mouseenter', function() {
                    popup.style.opacity = '1';
                    popup.style.visibility = 'visible';
                    popup.style.transform = 'translateX(0)';
                });
                
                popup.addEventListener('mouseleave', function() {
                    popup.style.opacity = '0';
                    popup.style.visibility = 'hidden';
                    popup.style.transform = 'translateX(8px)';
                });
            }
        });
    });
</script>


{% endblock %}